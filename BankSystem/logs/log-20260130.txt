2026-01-30 01:47:30.463 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 01:47:30.616 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 01:47:30.753 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 01:47:30.758 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 01:47:30.762 +02:00 [INF] Hosting environment: Development
2026-01-30 01:47:30.765 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 01:47:32.608 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 01:47:32.985 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 394.3766ms
2026-01-30 01:47:33.006 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 01:47:33.024 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 01:47:33.043 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 18.4085ms
2026-01-30 01:47:33.071 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.6651ms
2026-01-30 01:47:33.118 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 01:47:33.411 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 293.2605ms
2026-01-30 01:49:34.313 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/Create - multipart/form-data; boundary=----WebKitFormBoundaryVfTvEodPcL3BQdAR 12839
2026-01-30 01:49:34.358 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 01:49:35.492 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem)'
2026-01-30 01:49:35.541 +02:00 [INF] Route matched with {action = "AddUser", controller = "ApplicationUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddUserAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.AddUserCommand) on controller BankSystem.Controllers.ApplicationUserController (BankSystem).
2026-01-30 01:49:42.783 +02:00 [INF] Executed DbCommand (100ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2026-01-30 01:49:44.573 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 01:49:49.289 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 01:49:49.604 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [Address], [ConcurrencyStamp], [Country], [Email], [EmailConfirmed], [FullName], [Image], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2026-01-30 01:49:53.226 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 01:49:55.550 +02:00 [INF] Executed action BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem) in 19991.0909ms
2026-01-30 01:49:55.558 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem)'
2026-01-30 01:49:56.509 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/Create - 200 null application/json; charset=utf-8 22196.3999ms
2026-01-30 01:51:27.504 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/AddRoleToUser - application/json 37
2026-01-30 01:51:27.546 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem)'
2026-01-30 01:51:27.558 +02:00 [INF] Route matched with {action = "AddRoleToUser", controller = "Authorization"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoleToUser(BusinessCore.BankSystem.Features.Authorization.Commands.Requests.AddRoleToUserCommand) on controller BankSystem.Controllers.AuthorizationController (BankSystem).
2026-01-30 01:51:27.719 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2026-01-30 01:51:27.762 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-30 01:51:27.779 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Response`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 01:51:27.786 +02:00 [INF] Executed action BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem) in 210.8781ms
2026-01-30 01:51:27.792 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem)'
2026-01-30 01:51:27.796 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/AddRoleToUser - 400 null application/json; charset=utf-8 293.4977ms
2026-01-30 01:51:46.636 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/Create - multipart/form-data; boundary=----WebKitFormBoundaryVlnW0zeg8ntMuWUi 144
2026-01-30 01:51:46.680 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthorizationController.AddRole (BankSystem)'
2026-01-30 01:51:46.691 +02:00 [INF] Route matched with {action = "AddRole", controller = "Authorization"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRole(BusinessCore.BankSystem.Features.Authorization.Commands.Requests.AddRoleCommand) on controller BankSystem.Controllers.AuthorizationController (BankSystem).
2026-01-30 01:51:46.724 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-30 01:51:46.763 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 256), @p2='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([ConcurrencyStamp], [Name], [NormalizedName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2026-01-30 01:51:46.777 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 01:51:46.784 +02:00 [INF] Executed action BankSystem.Controllers.AuthorizationController.AddRole (BankSystem) in 83.957ms
2026-01-30 01:51:46.788 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthorizationController.AddRole (BankSystem)'
2026-01-30 01:51:46.793 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/Create - 200 null application/json; charset=utf-8 156.9683ms
2026-01-30 01:51:52.511 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/AddRoleToUser - application/json 37
2026-01-30 01:51:52.523 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem)'
2026-01-30 01:51:52.529 +02:00 [INF] Route matched with {action = "AddRoleToUser", controller = "Authorization"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoleToUser(BusinessCore.BankSystem.Features.Authorization.Commands.Requests.AddRoleToUserCommand) on controller BankSystem.Controllers.AuthorizationController (BankSystem).
2026-01-30 01:51:52.550 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2026-01-30 01:51:52.568 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-30 01:51:52.587 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2026-01-30 01:51:52.611 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2026-01-30 01:51:52.626 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2026-01-30 01:51:52.651 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 01:51:52.711 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p20='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p21='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [Address] = @p3, [ConcurrencyStamp] = @p4, [Country] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Image] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2026-01-30 01:51:52.737 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 01:51:52.745 +02:00 [INF] Executed action BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem) in 205.6291ms
2026-01-30 01:51:52.750 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem)'
2026-01-30 01:51:52.753 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/AddRoleToUser - 200 null application/json; charset=utf-8 243.1634ms
2026-01-30 01:52:31.918 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/Create - multipart/form-data; boundary=----WebKitFormBoundarymEGeNfK9DiCdZp1I 143
2026-01-30 01:52:31.931 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthorizationController.AddRole (BankSystem)'
2026-01-30 01:52:31.935 +02:00 [INF] Route matched with {action = "AddRole", controller = "Authorization"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRole(BusinessCore.BankSystem.Features.Authorization.Commands.Requests.AddRoleCommand) on controller BankSystem.Controllers.AuthorizationController (BankSystem).
2026-01-30 01:52:31.955 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-30 01:52:31.981 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 256), @p2='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([ConcurrencyStamp], [Name], [NormalizedName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2026-01-30 01:52:31.992 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 01:52:31.998 +02:00 [INF] Executed action BankSystem.Controllers.AuthorizationController.AddRole (BankSystem) in 50.0634ms
2026-01-30 01:52:32.004 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthorizationController.AddRole (BankSystem)'
2026-01-30 01:52:32.009 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/Create - 200 null application/json; charset=utf-8 91.1438ms
2026-01-30 01:54:16.405 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/Create - multipart/form-data; boundary=----WebKitFormBoundaryCHpwS8UBFJatHusS 897
2026-01-30 01:54:16.430 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem)'
2026-01-30 01:54:16.441 +02:00 [INF] Route matched with {action = "AddUser", controller = "ApplicationUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddUserAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.AddUserCommand) on controller BankSystem.Controllers.ApplicationUserController (BankSystem).
2026-01-30 01:54:16.461 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-01-30 01:54:16.480 +02:00 [INF] Executed action BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem) in 25.4763ms
2026-01-30 01:54:16.489 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem)'
2026-01-30 01:54:16.493 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/Create - 400 null application/problem+json; charset=utf-8 88.459ms
2026-01-30 01:54:35.300 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/Create - multipart/form-data; boundary=----WebKitFormBoundaryWDEwvCbzD4AXABtc 56100
2026-01-30 01:54:35.326 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem)'
2026-01-30 01:54:35.329 +02:00 [INF] Route matched with {action = "AddUser", controller = "ApplicationUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddUserAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.AddUserCommand) on controller BankSystem.Controllers.ApplicationUserController (BankSystem).
2026-01-30 01:54:38.594 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2026-01-30 01:54:39.928 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 01:54:47.900 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 01:54:47.940 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [Address], [ConcurrencyStamp], [Country], [Email], [EmailConfirmed], [FullName], [Image], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2026-01-30 01:54:51.325 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 01:54:53.774 +02:00 [INF] Executed action BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem) in 18435.8957ms
2026-01-30 01:54:53.781 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem)'
2026-01-30 01:54:55.418 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/Create - 200 null application/json; charset=utf-8 20117.7357ms
2026-01-30 01:55:24.798 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/AddRoleToUser - application/json 36
2026-01-30 01:55:24.813 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem)'
2026-01-30 01:55:24.819 +02:00 [INF] Route matched with {action = "AddRoleToUser", controller = "Authorization"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoleToUser(BusinessCore.BankSystem.Features.Authorization.Commands.Requests.AddRoleToUserCommand) on controller BankSystem.Controllers.AuthorizationController (BankSystem).
2026-01-30 01:55:24.847 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2026-01-30 01:55:30.719 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-30 01:55:32.362 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2026-01-30 01:55:32.399 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2026-01-30 01:55:32.409 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2026-01-30 01:55:32.422 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 01:55:32.443 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p20='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p21='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [Address] = @p3, [ConcurrencyStamp] = @p4, [Country] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Image] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2026-01-30 01:55:37.915 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 01:55:40.198 +02:00 [INF] Executed action BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem) in 15369.8261ms
2026-01-30 01:55:40.206 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem)'
2026-01-30 01:55:41.254 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/AddRoleToUser - 200 null application/json; charset=utf-8 16456.3656ms
2026-01-30 01:58:04.276 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 01:58:04.362 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 01:58:04.403 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 01:58:04.410 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 01:58:04.412 +02:00 [INF] Hosting environment: Development
2026-01-30 01:58:04.414 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 01:58:04.831 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 01:58:05.055 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 224.9351ms
2026-01-30 01:58:05.072 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 01:58:05.082 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 01:58:05.098 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 15.6388ms
2026-01-30 01:58:05.127 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.8697ms
2026-01-30 01:58:05.193 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 01:58:05.426 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 233.1905ms
2026-01-30 02:02:17.404 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 02:02:17.554 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 02:02:17.682 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 02:02:17.690 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 02:02:17.695 +02:00 [INF] Hosting environment: Development
2026-01-30 02:02:17.700 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 02:02:17.951 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 02:02:18.260 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 316.5889ms
2026-01-30 02:02:18.265 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 02:02:18.286 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 02:02:18.314 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 28.849ms
2026-01-30 02:02:18.342 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.3535ms
2026-01-30 02:02:18.391 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 02:02:18.655 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 263.8599ms
2026-01-30 02:02:44.189 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundaryLuZzeqjskj4mbziV 262
2026-01-30 02:02:44.221 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 02:02:44.282 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 02:02:44.321 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 02:02:45.963 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 02:03:04.193 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-30 02:03:04.255 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2026-01-30 02:03:18.928 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshToken] ([AddedTime], [ExpiryDate], [IsRevoked], [IsUsed], [JwtId], [RefreshTokenHash], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2026-01-30 02:03:30.259 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 02:03:36.933 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 52592.3159ms
2026-01-30 02:03:36.940 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 02:03:39.084 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 200 null application/json; charset=utf-8 54895.002ms
2026-01-30 02:05:36.309 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetAll - null null
2026-01-30 02:05:36.352 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2026-01-30 02:05:36.365 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 02:05:36.369 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetAll - 401 0 null 62.6722ms
2026-01-30 02:05:47.857 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetAll - null null
2026-01-30 02:05:47.890 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2026-01-30 02:05:47.897 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 02:05:47.900 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetAll - 401 0 null 42.4731ms
2026-01-30 02:06:06.183 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetAll - null null
2026-01-30 02:06:06.253 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.GetAll (BankSystem)'
2026-01-30 02:06:06.264 +02:00 [INF] Route matched with {action = "GetAll", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 02:06:22.597 +02:00 [INF] Handling GetAllAccountsQuery
2026-01-30 02:06:32.371 +02:00 [INF] GetAllAccountsAsync called by user 16, IsAdmin: true
2026-01-30 02:06:50.069 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId]
FROM [BankAccounts] AS [b]
2026-01-30 02:07:11.153 +02:00 [INF] No accounts found in the system
2026-01-30 02:07:14.750 +02:00 [INF] Executing ObjectResult, writing value of type 'Response`1[[System.Collections.Generic.IEnumerable`1[[BusinessCore.BankSystem.Features.BankAccount.Queries.Responses.BankAccountResponse, BusinessCore.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 02:07:17.596 +02:00 [INF] Executed action BankSystem.Controllers.BankAccountController.GetAll (BankSystem) in 71321.9495ms
2026-01-30 02:07:17.602 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.BankAccountController.GetAll (BankSystem)'
2026-01-30 02:07:18.988 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetAll - 200 null application/json; charset=utf-8 72805.6522ms
2026-01-30 02:11:29.461 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 02:11:29.602 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 02:11:29.740 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 02:11:29.746 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 02:11:29.751 +02:00 [INF] Hosting environment: Development
2026-01-30 02:11:29.756 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 02:11:30.017 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 02:11:30.325 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 316.5019ms
2026-01-30 02:11:30.346 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 02:11:30.350 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 02:11:30.376 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 25.1288ms
2026-01-30 02:11:30.406 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.341ms
2026-01-30 02:11:30.463 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 02:11:30.714 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 250.2147ms
2026-01-30 02:12:55.899 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 02:12:55.951 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 02:12:56.018 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 02:12:56.048 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 02:13:06.067 +02:00 [INF] Creating account for user 16
2026-01-30 02:13:29.027 +02:00 [WRN] Attempted to access CurrentUserId but user is not authenticated
2026-01-30 02:19:27.154 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 02:19:27.282 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 02:19:27.401 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 02:19:27.408 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 02:19:27.411 +02:00 [INF] Hosting environment: Development
2026-01-30 02:19:27.415 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 02:19:27.733 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 02:19:28.036 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 308.396ms
2026-01-30 02:19:28.055 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 02:19:28.055 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 02:19:28.079 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 23.3666ms
2026-01-30 02:19:28.137 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 82.7008ms
2026-01-30 02:19:28.185 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 02:19:28.426 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 240.6211ms
2026-01-30 02:20:32.900 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 54
2026-01-30 02:20:32.941 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 02:20:33.062 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 12:08:04 AM', Current time (UTC): '1/30/2026 12:20:33 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2026-01-30 02:20:33.092 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 12:08:04 AM', Current time (UTC): '1/30/2026 12:20:33 AM'.
2026-01-30 02:20:33.101 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 02:20:33.135 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 02:20:38.022 +02:00 [INF] Creating account for user 1
2026-01-30 02:21:14.276 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 02:21:14.423 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 02:21:14.535 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 02:21:14.543 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 02:21:14.547 +02:00 [INF] Hosting environment: Development
2026-01-30 02:21:14.550 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 02:21:14.844 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 02:21:15.148 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 308.5533ms
2026-01-30 02:21:15.167 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 02:21:15.168 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 02:21:15.197 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 28.7796ms
2026-01-30 02:21:15.234 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 67.3983ms
2026-01-30 02:21:15.299 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 02:21:15.566 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 267.2246ms
2026-01-30 02:22:08.778 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 02:22:08.818 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 02:22:08.956 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 12:08:04 AM', Current time (UTC): '1/30/2026 12:22:08 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2026-01-30 02:22:08.982 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 12:08:04 AM', Current time (UTC): '1/30/2026 12:22:08 AM'.
2026-01-30 02:22:08.991 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 02:22:09.017 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 02:22:13.533 +02:00 [INF] Creating account for user 17
2026-01-30 02:22:20.540 +02:00 [WRN] Attempted to access CurrentUserId but user is not authenticated
2026-01-30 02:26:42.477 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 02:26:42.620 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 02:26:42.727 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 02:26:42.733 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 02:26:42.736 +02:00 [INF] Hosting environment: Development
2026-01-30 02:26:42.739 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 02:26:43.392 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 02:26:43.689 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 301.7399ms
2026-01-30 02:26:43.710 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 02:26:43.720 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 02:26:43.743 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 22.0244ms
2026-01-30 02:26:43.777 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.042ms
2026-01-30 02:26:43.825 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 02:26:44.101 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 276.4341ms
2026-01-30 02:27:16.815 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 02:27:16.872 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 02:27:16.997 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 12:08:04 AM', Current time (UTC): '1/30/2026 12:27:16 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2026-01-30 02:27:17.019 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 12:08:04 AM', Current time (UTC): '1/30/2026 12:27:16 AM'.
2026-01-30 02:27:17.030 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 02:27:17.060 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 02:27:27.675 +02:00 [INF] Creating account for user 17
2026-01-30 02:27:28.313 +02:00 [WRN] Attempted to access CurrentUserId but user is not authenticated
2026-01-30 02:33:05.576 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 02:33:05.713 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 02:33:05.828 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 02:33:05.836 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 02:33:05.839 +02:00 [INF] Hosting environment: Development
2026-01-30 02:33:05.841 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 02:33:06.550 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 02:33:06.874 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 330.3933ms
2026-01-30 02:33:06.881 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 02:33:06.903 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 02:33:06.929 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 25.4121ms
2026-01-30 02:33:06.969 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 87.6305ms
2026-01-30 02:33:07.026 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 02:33:07.313 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 286.5671ms
2026-01-30 02:33:28.305 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundaryhHoZlARTUOaMLWT7 256
2026-01-30 02:33:28.344 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 02:33:28.403 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 02:33:28.435 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 02:33:30.010 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 02:33:33.912 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-30 02:33:33.984 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2026-01-30 02:33:36.468 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshToken] ([AddedTime], [ExpiryDate], [IsRevoked], [IsUsed], [JwtId], [RefreshTokenHash], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2026-01-30 02:33:42.309 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 02:33:48.194 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 19745.0343ms
2026-01-30 02:33:48.203 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 02:33:49.708 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 200 null application/json; charset=utf-8 21403.1551ms
2026-01-30 02:34:44.591 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 02:34:44.665 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 02:34:44.677 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 02:34:51.059 +02:00 [INF] Creating account for user 17
2026-01-30 02:35:43.925 +02:00 [INF] CreateAccountAsync called by user 17, Target: 17, Type: "Saving", Currency: "EGP"
2026-01-30 02:37:14.439 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId], [u].[Id], [u].[CreatedAt], [u].[ISDeleted], [u].[Nationality], [u].[NationallId]
FROM [BankAccounts] AS [b]
INNER JOIN [users] AS [u] ON [b].[UserId] = [u].[Id]
WHERE [b].[UserId] = @__userId_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 02:37:21.750 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId]
FROM [BankAccounts] AS [b]
WHERE [b].[AccountNumber] = @__accountNumber_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 02:37:21.784 +02:00 [DBG] Generated unique account number: ACCT-2820D5D733E2
2026-01-30 02:37:24.471 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Single), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BankAccounts] ([AccountNumber], [AccountType], [Balance], [CreatedData], [Currency], [ISDeleted], [IsActive], [UpdatedData], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-30 02:37:24.577 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'InfrastructureLayer.BankSystem.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:339baaa4-61b5-4822-8a5d-98996f1e7889
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:339baaa4-61b5-4822-8a5d-98996f1e7889
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-30 02:37:24.887 +02:00 [ERR] Critical error during account creation
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:339baaa4-61b5-4822-8a5d-98996f1e7889
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at InfrastructureLayer.BankSystem.InfrastructureBases.Repository`1.AddAsync(T entity) in D:\BankSystem\BankSystem\BankSystem\InfrastructureLayer.BankSystem\InfrastructureBases\Repository.cs:line 46
   at ApplicationLayer.BankSystem.ImplementServices.BankAccountService.CreateAccountAsync(CreateAccountRequest model) in D:\BankSystem\BankSystem\BankSystem\ApplicationLayer.BankSystem\ImplementServices\BankAccountService.cs:line 257
   at BusinessCore.BankSystem.Features.BankAccount.Commands.Handler.BankAccountCommandHandler.Handle(CreateAccountCommand request, CancellationToken cancellationToken) in D:\BankSystem\BankSystem\BankSystem\BusinessCore.BankSystem\Features\BankAccount\Commands\Handler\BankAccountCommandHandler.cs:line 37
2026-01-30 02:37:25.004 +02:00 [INF] Executing ObjectResult, writing value of type 'Response`1[[BusinessCore.BankSystem.Features.BankAccount.Queries.Responses.BankAccountResponse, BusinessCore.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 02:37:25.015 +02:00 [INF] Executed action BankSystem.Controllers.BankAccountController.Create (BankSystem) in 160328.2918ms
2026-01-30 02:37:25.021 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 02:37:25.025 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - 500 null application/json; charset=utf-8 160435.7648ms
2026-01-30 02:37:56.237 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 02:37:56.271 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 02:37:56.278 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 02:37:58.456 +02:00 [INF] Creating account for user 17
2026-01-30 02:39:00.936 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 02:39:01.083 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 02:39:01.184 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 02:39:01.190 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 02:39:01.193 +02:00 [INF] Hosting environment: Development
2026-01-30 02:39:01.195 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 02:39:01.965 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 02:39:02.279 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 319.2072ms
2026-01-30 02:39:02.291 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 02:39:02.299 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 02:39:02.325 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 25.6323ms
2026-01-30 02:39:02.354 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.2633ms
2026-01-30 02:39:02.414 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 02:39:02.746 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 330.9921ms
2026-01-30 02:39:29.654 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 02:39:29.710 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 02:39:29.832 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 12:38:33 AM', Current time (UTC): '1/30/2026 12:39:29 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2026-01-30 02:39:29.860 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 12:38:33 AM', Current time (UTC): '1/30/2026 12:39:29 AM'.
2026-01-30 02:39:29.870 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 02:39:29.898 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 02:39:41.847 +02:00 [INF] Creating account for user 17
2026-01-30 02:39:44.100 +02:00 [WRN] Attempted to access CurrentUserId but user is not authenticated
2026-01-30 02:40:06.635 +02:00 [WRN] Unauthorized attempt to create account
System.UnauthorizedAccessException: User is not authenticated
   at ApplicationLayer.BankSystem.ImplementServices.BankAccountService.get_CurrentUserId() in D:\BankSystem\BankSystem\BankSystem\ApplicationLayer.BankSystem\ImplementServices\BankAccountService.cs:line 42
   at ApplicationLayer.BankSystem.ImplementServices.BankAccountService.CreateAccountAsync(CreateAccountRequest model) in D:\BankSystem\BankSystem\BankSystem\ApplicationLayer.BankSystem\ImplementServices\BankAccountService.cs:line 172
   at BusinessCore.BankSystem.Features.BankAccount.Commands.Handler.BankAccountCommandHandler.Handle(CreateAccountCommand request, CancellationToken cancellationToken) in D:\BankSystem\BankSystem\BankSystem\BusinessCore.BankSystem\Features\BankAccount\Commands\Handler\BankAccountCommandHandler.cs:line 37
2026-01-30 02:40:10.343 +02:00 [INF] Executing ObjectResult, writing value of type 'Response`1[[BusinessCore.BankSystem.Features.BankAccount.Queries.Responses.BankAccountResponse, BusinessCore.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 02:40:12.363 +02:00 [INF] Executed action BankSystem.Controllers.BankAccountController.Create (BankSystem) in 42447.5365ms
2026-01-30 02:40:12.372 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 02:40:13.121 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - 401 null application/json; charset=utf-8 43467.7791ms
2026-01-30 02:42:23.113 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 02:42:23.257 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 02:42:23.389 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 02:42:23.396 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 02:42:23.407 +02:00 [INF] Hosting environment: Development
2026-01-30 02:42:23.412 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 02:42:23.697 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 02:42:24.068 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 373.8884ms
2026-01-30 02:42:24.079 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 02:42:24.091 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 02:42:24.112 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 19.9777ms
2026-01-30 02:42:24.159 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.1832ms
2026-01-30 02:42:24.207 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 02:42:24.463 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 255.3961ms
2026-01-30 02:42:46.385 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundaryeB1728PJdNW80MYb 256
2026-01-30 02:42:46.418 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 02:42:46.488 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 02:42:46.517 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 02:42:48.124 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 02:42:51.483 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-30 02:42:51.551 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2026-01-30 02:42:53.331 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshToken] ([AddedTime], [ExpiryDate], [IsRevoked], [IsUsed], [JwtId], [RefreshTokenHash], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2026-01-30 02:42:56.567 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 02:43:01.142 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 14611.1598ms
2026-01-30 02:43:01.151 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 02:43:02.718 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 200 null application/json; charset=utf-8 16332.9591ms
2026-01-30 02:43:43.996 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 02:43:44.025 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 02:43:44.040 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 02:43:53.856 +02:00 [INF] Creating account for user 17
2026-01-30 02:43:56.743 +02:00 [WRN] Attempted to access CurrentUserId but user is not authenticated
2026-01-30 02:52:32.172 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 02:52:32.252 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 02:52:32.293 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 02:52:32.300 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 02:52:32.302 +02:00 [INF] Hosting environment: Development
2026-01-30 02:52:32.304 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 02:52:32.517 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 02:52:32.733 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 216.7327ms
2026-01-30 02:52:32.749 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 02:52:32.755 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 02:52:32.773 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 17.436ms
2026-01-30 02:52:32.800 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.4991ms
2026-01-30 02:52:32.865 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 02:52:33.076 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 211.3113ms
2026-01-30 02:53:01.406 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Create - application/json 55
2026-01-30 02:53:01.447 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 02:53:01.509 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 12:47:51 AM', Current time (UTC): '1/30/2026 12:53:01 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2026-01-30 02:53:01.531 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 12:47:51 AM', Current time (UTC): '1/30/2026 12:53:01 AM'.
2026-01-30 02:53:01.539 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-30 02:53:01.553 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 02:53:01.561 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Create - 401 0 null 154.2422ms
2026-01-30 03:00:47.658 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 03:00:47.751 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 03:00:47.791 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 03:00:47.798 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 03:00:47.800 +02:00 [INF] Hosting environment: Development
2026-01-30 03:00:47.802 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 03:00:47.944 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 03:00:48.155 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 212.1787ms
2026-01-30 03:00:48.178 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 03:00:48.170 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 03:00:48.189 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 11.4491ms
2026-01-30 03:00:48.221 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.7206ms
2026-01-30 03:00:48.293 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 03:00:48.507 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 214.1866ms
2026-01-30 03:01:14.646 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Create - application/json 55
2026-01-30 03:01:14.686 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 03:01:14.748 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 12:47:51 AM', Current time (UTC): '1/30/2026 1:01:14 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2026-01-30 03:01:14.770 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 12:47:51 AM', Current time (UTC): '1/30/2026 1:01:14 AM'.
2026-01-30 03:01:14.778 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-30 03:01:14.789 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 03:01:14.796 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Create - 401 0 null 149.7938ms
2026-01-30 03:01:41.285 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Create - application/json 55
2026-01-30 03:01:41.303 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values. (Parameter 'IDX10820: Invalid character found in Base64UrlEncoding. Character: '32', Encoding: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.')
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode(String input, Int32 offset, Int32 length, Byte[] output)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2026-01-30 03:01:41.332 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2026-01-30 03:01:41.341 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-30 03:01:41.344 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 03:01:41.347 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Create - 401 0 null 61.6919ms
2026-01-30 03:01:42.177 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Create - application/json 55
2026-01-30 03:01:42.192 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values. (Parameter 'IDX10820: Invalid character found in Base64UrlEncoding. Character: '32', Encoding: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.')
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode(String input, Int32 offset, Int32 length, Byte[] output)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2026-01-30 03:01:42.212 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2026-01-30 03:01:42.219 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-30 03:01:42.224 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 03:01:42.227 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Create - 401 0 null 49.824ms
2026-01-30 03:01:42.765 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Create - application/json 55
2026-01-30 03:01:42.790 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values. (Parameter 'IDX10820: Invalid character found in Base64UrlEncoding. Character: '32', Encoding: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.')
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode(String input, Int32 offset, Int32 length, Byte[] output)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2026-01-30 03:01:42.810 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2026-01-30 03:01:42.814 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-30 03:01:42.818 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 03:01:42.821 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Create - 401 0 null 56.3932ms
2026-01-30 03:01:42.996 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Create - application/json 55
2026-01-30 03:01:43.010 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values. (Parameter 'IDX10820: Invalid character found in Base64UrlEncoding. Character: '32', Encoding: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.')
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode(String input, Int32 offset, Int32 length, Byte[] output)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2026-01-30 03:01:43.029 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2026-01-30 03:01:43.033 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-30 03:01:43.039 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 03:01:43.042 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Create - 401 0 null 45.6581ms
2026-01-30 03:01:45.463 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Create - application/json 54
2026-01-30 03:01:45.475 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values. (Parameter 'IDX10820: Invalid character found in Base64UrlEncoding. Character: '32', Encoding: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.')
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode(String input, Int32 offset, Int32 length, Byte[] output)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2026-01-30 03:01:45.496 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2026-01-30 03:01:45.503 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-30 03:01:45.506 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 03:01:45.509 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Create - 401 0 null 46.7646ms
2026-01-30 03:04:57.490 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 03:04:57.640 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 03:04:57.765 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 03:04:57.773 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 03:04:57.782 +02:00 [INF] Hosting environment: Development
2026-01-30 03:04:57.787 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 03:04:58.254 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 03:04:58.561 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 313.742ms
2026-01-30 03:04:58.576 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 03:04:58.581 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 03:04:58.608 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 23.5996ms
2026-01-30 03:04:58.647 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.2973ms
2026-01-30 03:04:58.693 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 03:04:58.948 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 254.1827ms
2026-01-30 03:05:42.977 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundary3FrDbj3EpNVH7ohY 264
2026-01-30 03:05:43.021 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 03:05:43.080 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 03:05:43.125 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 03:05:44.719 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 03:05:44.776 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 03:05:44.803 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 1663.5719ms
2026-01-30 03:05:44.810 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 03:05:44.824 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 400 null application/json; charset=utf-8 1846.7019ms
2026-01-30 03:05:56.519 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundaryi3mGh5dJwOSr4w7k 263
2026-01-30 03:05:56.539 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 03:05:56.547 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 03:05:56.632 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 03:05:56.641 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 03:05:56.646 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 88.4691ms
2026-01-30 03:05:56.650 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 03:05:56.653 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 400 null application/json; charset=utf-8 133.9293ms
2026-01-30 03:06:40.813 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundaryBrQBpRmwv1oxOexF 263
2026-01-30 03:06:40.846 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 03:06:40.853 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 03:06:40.903 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 03:06:40.920 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 03:06:40.926 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 61.9769ms
2026-01-30 03:06:40.930 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 03:06:40.933 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 400 null application/json; charset=utf-8 120.5115ms
2026-01-30 03:06:51.462 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 03:06:51.493 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 31.1773ms
2026-01-30 03:06:51.522 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 03:06:51.527 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 03:06:51.558 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 30.8193ms
2026-01-30 03:06:51.567 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.8974ms
2026-01-30 03:06:51.699 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 03:06:51.708 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/favicon-32x32.png - null null
2026-01-30 03:06:51.741 +02:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2026-01-30 03:06:51.749 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/favicon-32x32.png - 200 628 image/png 40.5711ms
2026-01-30 03:06:51.761 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 61.9096ms
2026-01-30 03:07:05.539 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundaryjlngYenfr0IAqZAH 263
2026-01-30 03:07:05.555 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 03:07:05.561 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 03:07:05.583 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 03:07:05.594 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 03:07:05.598 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 27.1432ms
2026-01-30 03:07:05.603 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 03:07:05.609 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 400 null application/json; charset=utf-8 70.3442ms
2026-01-30 03:08:20.305 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 03:08:20.422 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 03:08:20.534 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 03:08:20.540 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 03:08:20.543 +02:00 [INF] Hosting environment: Development
2026-01-30 03:08:20.545 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 03:08:21.097 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 03:08:21.414 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 327.2081ms
2026-01-30 03:08:21.430 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 03:08:21.436 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 03:08:21.472 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 36.4722ms
2026-01-30 03:08:21.513 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 83.3268ms
2026-01-30 03:08:21.573 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 03:08:21.823 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 249.6048ms
2026-01-30 03:10:02.706 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 03:10:02.839 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 03:10:02.968 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 03:10:02.975 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 03:10:02.978 +02:00 [INF] Hosting environment: Development
2026-01-30 03:10:02.980 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 03:10:03.340 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 03:10:03.706 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 372.7341ms
2026-01-30 03:10:03.712 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 03:10:03.728 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 03:10:03.747 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 19.241ms
2026-01-30 03:10:03.781 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.8557ms
2026-01-30 03:10:03.826 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 03:10:04.073 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 247.2309ms
2026-01-30 03:11:31.152 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundary3UWlidPAPpLXy3Gd 262
2026-01-30 03:11:31.202 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 03:11:31.265 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 03:11:31.293 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 03:11:34.856 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 03:11:39.037 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-30 03:11:39.097 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2026-01-30 03:11:40.855 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshToken] ([AddedTime], [ExpiryDate], [IsRevoked], [IsUsed], [JwtId], [RefreshTokenHash], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2026-01-30 03:11:44.480 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 03:11:48.440 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 17136.0897ms
2026-01-30 03:11:48.451 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 03:11:49.711 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 200 null application/json; charset=utf-8 18559.3647ms
2026-01-30 03:12:47.122 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetMyAccounts - null null
2026-01-30 03:12:47.165 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2026-01-30 03:12:47.194 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2026-01-30 03:12:47.198 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.GetMyAccounts (BankSystem)'
2026-01-30 03:12:47.205 +02:00 [INF] Route matched with {action = "GetMyAccounts", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyAccounts() on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 03:13:00.502 +02:00 [INF] Handling GetMyAccountsQuery
2026-01-30 03:13:12.574 +02:00 [WRN] Attempted to access CurrentUserId but user is not authenticated
2026-01-30 03:18:19.632 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 03:18:19.779 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 03:18:19.891 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 03:18:19.898 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 03:18:19.901 +02:00 [INF] Hosting environment: Development
2026-01-30 03:18:19.906 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 03:18:20.265 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 03:18:20.580 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 321.0716ms
2026-01-30 03:18:20.588 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 03:18:20.605 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 03:18:20.632 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 26.9635ms
2026-01-30 03:18:20.673 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 85.4163ms
2026-01-30 03:18:20.716 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 03:18:21.016 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 300.7951ms
2026-01-30 03:19:00.055 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetMyAccounts - null null
2026-01-30 03:19:00.104 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 03:19:00.191 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2026-01-30 03:19:00.223 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2026-01-30 03:19:00.232 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.GetMyAccounts (BankSystem)'
2026-01-30 03:19:00.253 +02:00 [INF] Route matched with {action = "GetMyAccounts", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyAccounts() on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 03:19:06.173 +02:00 [INF] Handling GetMyAccountsQuery
2026-01-30 03:21:20.925 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 03:21:21.069 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 03:21:21.193 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 03:21:21.201 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 03:21:21.204 +02:00 [INF] Hosting environment: Development
2026-01-30 03:21:21.207 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 03:21:21.865 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 03:21:22.164 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 307.8706ms
2026-01-30 03:21:22.185 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 03:21:22.183 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 03:21:22.206 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 21.3119ms
2026-01-30 03:21:22.255 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.0304ms
2026-01-30 03:21:22.309 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 03:21:22.609 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 300.2662ms
2026-01-30 03:21:51.837 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetMyAccounts - null null
2026-01-30 03:21:51.879 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 03:21:51.960 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2026-01-30 03:21:51.991 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2026-01-30 03:21:52.003 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-30 03:21:52.018 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 03:21:52.026 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetMyAccounts - 401 0 null 188.9384ms
2026-01-30 03:26:20.904 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 03:26:21.046 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 03:26:21.162 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 03:26:21.169 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 03:26:21.175 +02:00 [INF] Hosting environment: Development
2026-01-30 03:26:21.180 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 03:26:21.762 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 03:26:22.070 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 313.5425ms
2026-01-30 03:26:22.076 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 03:26:22.094 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 03:26:22.102 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 25.7382ms
2026-01-30 03:26:22.171 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 76.4862ms
2026-01-30 03:26:22.208 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 03:26:22.460 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 251.7954ms
2026-01-30 03:26:54.816 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetById/16 - null null
2026-01-30 03:26:54.870 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 03:26:54.940 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2026-01-30 03:26:54.971 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2026-01-30 03:26:54.984 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-30 03:26:54.994 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 03:26:55.001 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetById/16 - 401 0 null 185.806ms
2026-01-30 03:27:20.449 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetById/16 - null null
2026-01-30 03:27:20.480 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2026-01-30 03:27:20.505 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2026-01-30 03:27:20.511 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-30 03:27:20.515 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 03:27:20.517 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetById/16 - 401 0 null 68.6509ms
2026-01-30 03:27:21.196 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetById/16 - null null
2026-01-30 03:27:21.211 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2026-01-30 03:27:21.237 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2026-01-30 03:27:21.244 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-30 03:27:21.249 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 03:27:21.253 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetById/16 - 401 0 null 57.3782ms
2026-01-30 03:27:21.738 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetById/16 - null null
2026-01-30 03:27:21.750 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2026-01-30 03:27:21.778 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2026-01-30 03:27:21.781 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-30 03:27:21.785 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 03:27:21.789 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetById/16 - 401 0 null 50.7374ms
2026-01-30 03:32:21.707 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 03:32:21.854 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 03:32:21.979 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 03:32:21.987 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 03:32:21.989 +02:00 [INF] Hosting environment: Development
2026-01-30 03:32:21.993 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 03:32:22.558 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 03:32:22.874 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 320.4961ms
2026-01-30 03:32:22.891 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 03:32:22.900 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 03:32:22.923 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 22.6483ms
2026-01-30 03:32:22.995 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 105.3795ms
2026-01-30 03:32:23.056 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 03:32:23.369 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 312.6829ms
2026-01-30 03:33:11.485 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetMyAccounts - null null
2026-01-30 03:33:11.526 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 03:33:11.610 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2026-01-30 03:33:11.643 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2026-01-30 03:33:11.656 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-30 03:33:11.669 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 03:33:11.676 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetMyAccounts - 401 0 null 191.5204ms
2026-01-30 03:33:18.643 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetAll - null null
2026-01-30 03:33:18.668 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2026-01-30 03:33:18.706 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2026-01-30 03:33:18.715 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2026-01-30 03:33:18.721 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-30 03:33:18.725 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetAll - 401 0 null 82.4323ms
2026-01-30 03:34:55.065 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 03:34:55.197 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 03:34:55.318 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 03:34:55.323 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 03:34:55.325 +02:00 [INF] Hosting environment: Development
2026-01-30 03:34:55.330 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 03:34:55.620 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 03:34:55.939 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 324.2007ms
2026-01-30 03:34:55.948 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 03:34:55.957 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 03:34:55.997 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 40.1064ms
2026-01-30 03:34:56.029 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 82.0724ms
2026-01-30 03:34:56.080 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 03:34:56.334 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 254.2985ms
2026-01-30 03:35:42.670 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundaryJjeFlW8rP9SZw8NA 257
2026-01-30 03:35:42.711 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 03:35:42.768 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 03:35:42.799 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 03:35:47.055 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 03:35:51.462 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 03:35:53.802 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 10992.2225ms
2026-01-30 03:35:53.810 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 03:35:55.903 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 400 null application/json; charset=utf-8 13232.8478ms
2026-01-30 04:09:39.753 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 04:09:39.957 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 04:09:40.087 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 04:09:40.093 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 04:09:40.096 +02:00 [INF] Hosting environment: Development
2026-01-30 04:09:40.099 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 04:09:41.877 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 04:09:42.356 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 486.9299ms
2026-01-30 04:09:42.383 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 04:09:42.389 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 04:09:42.404 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 21.727ms
2026-01-30 04:09:42.485 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 96.7566ms
2026-01-30 04:09:42.536 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 04:09:42.855 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 318.8634ms
2026-01-30 04:11:41.481 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 04:11:41.611 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 04:11:41.730 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 04:11:41.737 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 04:11:41.740 +02:00 [INF] Hosting environment: Development
2026-01-30 04:11:41.742 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 04:11:42.875 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 04:11:43.286 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 416.0759ms
2026-01-30 04:11:43.306 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 04:11:43.315 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 04:11:43.336 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 31.1342ms
2026-01-30 04:11:43.379 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.6702ms
2026-01-30 04:11:43.453 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 04:11:43.736 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 282.3047ms
2026-01-30 04:15:24.521 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/Create - multipart/form-data; boundary=----WebKitFormBoundarypYAkJBH7g6x96gJb 56127
2026-01-30 04:15:24.548 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 04:15:24.806 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem)'
2026-01-30 04:15:24.851 +02:00 [INF] Route matched with {action = "AddUser", controller = "ApplicationUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddUserAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.AddUserCommand) on controller BankSystem.Controllers.ApplicationUserController (BankSystem).
2026-01-30 04:15:30.965 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2026-01-30 04:15:33.047 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 04:15:37.991 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 04:15:38.252 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [Address], [ConcurrencyStamp], [Country], [Email], [EmailConfirmed], [FullName], [Image], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2026-01-30 04:15:41.802 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 04:15:44.053 +02:00 [INF] Executed action BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem) in 19186.6039ms
2026-01-30 04:15:44.060 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem)'
2026-01-30 04:15:44.987 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/Create - 200 null application/json; charset=utf-8 20472.96ms
2026-01-30 04:16:35.479 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/AddRoleToUser - application/json 37
2026-01-30 04:16:42.011 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem)'
2026-01-30 04:16:42.021 +02:00 [INF] Route matched with {action = "AddRoleToUser", controller = "Authorization"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoleToUser(BusinessCore.BankSystem.Features.Authorization.Commands.Requests.AddRoleToUserCommand) on controller BankSystem.Controllers.AuthorizationController (BankSystem).
2026-01-30 04:16:42.161 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2026-01-30 04:16:42.208 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-30 04:16:42.242 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2026-01-30 04:16:42.267 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2026-01-30 04:16:42.282 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2026-01-30 04:16:42.307 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 04:16:42.358 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p20='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p21='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [Address] = @p3, [ConcurrencyStamp] = @p4, [Country] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Image] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2026-01-30 04:16:42.385 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 04:16:42.392 +02:00 [INF] Executed action BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem) in 363.0048ms
2026-01-30 04:16:42.397 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem)'
2026-01-30 04:16:43.742 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/AddRoleToUser - 200 null application/json; charset=utf-8 8263.5712ms
2026-01-30 04:17:12.644 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundaryR0cFSsnU21YMMWwS 266
2026-01-30 04:17:16.601 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 04:17:16.608 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 04:17:19.332 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 04:17:26.239 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-30 04:17:26.304 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2026-01-30 04:17:28.118 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshToken] ([AddedTime], [ExpiryDate], [IsRevoked], [IsUsed], [JwtId], [RefreshTokenHash], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2026-01-30 04:17:34.146 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 04:17:38.416 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 21799.0575ms
2026-01-30 04:17:38.424 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 04:17:40.200 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 200 null application/json; charset=utf-8 27556.3682ms
2026-01-30 04:18:12.739 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetAll - null null
2026-01-30 04:18:12.879 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.GetAll (BankSystem)'
2026-01-30 04:18:12.887 +02:00 [INF] Route matched with {action = "GetAll", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 04:18:12.903 +02:00 [INF] Handling GetAllAccountsQuery
2026-01-30 04:18:12.909 +02:00 [INF] GetAllAccountsAsync called by user 18, IsAdmin: true
2026-01-30 04:18:12.924 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId]
FROM [BankAccounts] AS [b]
2026-01-30 04:18:12.934 +02:00 [INF] No accounts found in the system
2026-01-30 04:18:12.938 +02:00 [INF] Executing ObjectResult, writing value of type 'Response`1[[System.Collections.Generic.IEnumerable`1[[BusinessCore.BankSystem.Features.BankAccount.Queries.Responses.BankAccountResponse, BusinessCore.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 04:18:12.955 +02:00 [INF] Executed action BankSystem.Controllers.BankAccountController.GetAll (BankSystem) in 55.8434ms
2026-01-30 04:18:12.963 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.BankAccountController.GetAll (BankSystem)'
2026-01-30 04:18:12.966 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetAll - 200 null application/json; charset=utf-8 227.2587ms
2026-01-30 04:18:26.742 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetById/18 - null null
2026-01-30 04:18:26.773 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.GetById (BankSystem)'
2026-01-30 04:18:26.782 +02:00 [INF] Route matched with {action = "GetById", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 04:18:29.258 +02:00 [INF] Handling GetAccountsByUserIdQuery for: 18
2026-01-30 04:18:29.599 +02:00 [INF] Authorized access to accounts for UserId: 18
2026-01-30 04:18:30.104 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId]
FROM [BankAccounts] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 04:18:35.135 +02:00 [INF] Executing ObjectResult, writing value of type 'Response`1[[System.Collections.Generic.IEnumerable`1[[BusinessCore.BankSystem.Features.BankAccount.Queries.Responses.BankAccountResponse, BusinessCore.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 04:18:37.055 +02:00 [INF] Executed action BankSystem.Controllers.BankAccountController.GetById (BankSystem) in 10260.2649ms
2026-01-30 04:18:37.064 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.BankAccountController.GetById (BankSystem)'
2026-01-30 04:18:38.269 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetById/18 - 200 null application/json; charset=utf-8 11526.6733ms
2026-01-30 04:19:04.677 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetMyAccounts - null null
2026-01-30 04:19:07.582 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.GetMyAccounts (BankSystem)'
2026-01-30 04:19:07.591 +02:00 [INF] Route matched with {action = "GetMyAccounts", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyAccounts() on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 04:19:08.837 +02:00 [INF] Handling GetMyAccountsQuery
2026-01-30 04:19:09.554 +02:00 [INF] GetMyAccountsAsync called by user 18
2026-01-30 04:19:09.599 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId], [u].[Id], [u].[CreatedAt], [u].[ISDeleted], [u].[Nationality], [u].[NationallId]
FROM [BankAccounts] AS [b]
INNER JOIN [users] AS [u] ON [b].[UserId] = [u].[Id]
WHERE [b].[UserId] = @__userId_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 04:19:18.650 +02:00 [INF] Executing ObjectResult, writing value of type 'Response`1[[System.Collections.Generic.IEnumerable`1[[BusinessCore.BankSystem.Features.BankAccount.Queries.Responses.BankAccountResponse, BusinessCore.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 04:19:20.948 +02:00 [INF] Executed action BankSystem.Controllers.BankAccountController.GetMyAccounts (BankSystem) in 13350.1863ms
2026-01-30 04:19:20.954 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.BankAccountController.GetMyAccounts (BankSystem)'
2026-01-30 04:19:21.890 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetMyAccounts - 200 null application/json; charset=utf-8 17213.1526ms
2026-01-30 04:20:11.489 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 04:20:11.516 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 04:20:11.529 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 04:20:19.299 +02:00 [INF] Creating account for user 17
2026-01-30 04:20:19.473 +02:00 [INF] CreateAccountAsync called by user 18, Target: 17, Type: "Current", Currency: "EGP"
2026-01-30 04:20:19.482 +02:00 [INF] Admin 18 creating account for user 17
2026-01-30 04:20:19.494 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId], [u].[Id], [u].[CreatedAt], [u].[ISDeleted], [u].[Nationality], [u].[NationallId]
FROM [BankAccounts] AS [b]
INNER JOIN [users] AS [u] ON [b].[UserId] = [u].[Id]
WHERE [b].[UserId] = @__userId_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 04:20:19.541 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId]
FROM [BankAccounts] AS [b]
WHERE [b].[AccountNumber] = @__accountNumber_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 04:20:19.554 +02:00 [DBG] Generated unique account number: ACCT-D5E90C0DDB33
2026-01-30 04:20:19.607 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Single), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BankAccounts] ([AccountNumber], [AccountType], [Balance], [CreatedData], [Currency], [ISDeleted], [IsActive], [UpdatedData], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-30 04:20:19.687 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'InfrastructureLayer.BankSystem.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a1a8413d-417c-4efd-b381-b2a4f4b40d9c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a1a8413d-417c-4efd-b381-b2a4f4b40d9c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-30 04:23:02.230 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 04:23:02.353 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 04:23:02.475 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 04:23:02.480 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 04:23:02.485 +02:00 [INF] Hosting environment: Development
2026-01-30 04:23:02.488 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 04:23:03.195 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 04:23:03.521 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 333.0028ms
2026-01-30 04:23:03.536 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 04:23:03.559 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 04:23:03.580 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 20.85ms
2026-01-30 04:23:03.617 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 82.336ms
2026-01-30 04:23:03.874 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 04:23:04.172 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 297.448ms
2026-01-30 04:23:36.066 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 04:23:36.120 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 04:23:36.233 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 2:22:26 AM', Current time (UTC): '1/30/2026 2:23:36 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2026-01-30 04:23:36.256 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 2:22:26 AM', Current time (UTC): '1/30/2026 2:23:36 AM'.
2026-01-30 04:23:36.267 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 04:23:36.295 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 04:23:41.242 +02:00 [INF] Creating account for user 18
2026-01-30 04:23:44.094 +02:00 [WRN] Attempted to access CurrentUserId but user is not authenticated
2026-01-30 04:23:55.665 +02:00 [WRN] Unauthorized attempt to create account
System.UnauthorizedAccessException: User is not authenticated
   at ApplicationLayer.BankSystem.ImplementServices.BankAccountService.get_CurrentUserId() in D:\BankSystem\BankSystem\BankSystem\ApplicationLayer.BankSystem\ImplementServices\BankAccountService.cs:line 42
   at ApplicationLayer.BankSystem.ImplementServices.BankAccountService.CreateAccountAsync(CreateAccountRequest model) in D:\BankSystem\BankSystem\BankSystem\ApplicationLayer.BankSystem\ImplementServices\BankAccountService.cs:line 173
   at BusinessCore.BankSystem.Features.BankAccount.Commands.Handler.BankAccountCommandHandler.Handle(CreateAccountCommand request, CancellationToken cancellationToken) in D:\BankSystem\BankSystem\BankSystem\BusinessCore.BankSystem\Features\BankAccount\Commands\Handler\BankAccountCommandHandler.cs:line 37
2026-01-30 04:23:59.470 +02:00 [INF] Executing ObjectResult, writing value of type 'Response`1[[BusinessCore.BankSystem.Features.BankAccount.Queries.Responses.BankAccountResponse, BusinessCore.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 04:24:01.120 +02:00 [INF] Executed action BankSystem.Controllers.BankAccountController.Create (BankSystem) in 24811.1503ms
2026-01-30 04:24:01.126 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 04:24:01.880 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - 401 null application/json; charset=utf-8 25814.6643ms
2026-01-30 04:25:44.912 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 04:25:45.036 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 04:25:45.155 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 04:25:45.163 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 04:25:45.168 +02:00 [INF] Hosting environment: Development
2026-01-30 04:25:45.171 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 04:25:45.472 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 04:25:45.762 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 300.4013ms
2026-01-30 04:25:45.769 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 04:25:45.781 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 04:25:45.805 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 24.103ms
2026-01-30 04:25:45.833 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 64.4917ms
2026-01-30 04:25:46.024 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 04:25:46.263 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 238.9216ms
2026-01-30 04:26:21.809 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 04:26:21.850 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 04:26:21.976 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 2:22:26 AM', Current time (UTC): '1/30/2026 2:26:21 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2026-01-30 04:26:22.001 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 2:22:26 AM', Current time (UTC): '1/30/2026 2:26:21 AM'.
2026-01-30 04:26:22.011 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 04:26:22.041 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 04:26:26.907 +02:00 [INF] Creating account for user 18
2026-01-30 04:26:40.175 +02:00 [WRN] Attempted to access CurrentUserId but user is not authenticated
2026-01-30 04:29:53.591 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 04:29:53.720 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 04:29:53.846 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 04:29:53.853 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 04:29:53.857 +02:00 [INF] Hosting environment: Development
2026-01-30 04:29:53.862 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 04:29:54.106 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 04:29:54.405 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 308.0752ms
2026-01-30 04:29:54.418 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 04:29:54.430 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 04:29:54.449 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 19.2023ms
2026-01-30 04:29:54.482 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.6801ms
2026-01-30 04:29:54.549 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 04:29:54.780 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 230.8993ms
2026-01-30 04:30:47.017 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 04:30:47.061 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 04:30:47.126 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 04:30:47.155 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 04:30:52.638 +02:00 [INF] Creating account for user 17
2026-01-30 04:30:59.431 +02:00 [WRN] Attempted to access CurrentUserId but user is not authenticated
2026-01-30 18:08:42.189 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 18:08:42.363 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 18:08:42.408 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 18:08:42.414 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 18:08:42.417 +02:00 [INF] Hosting environment: Development
2026-01-30 18:08:42.420 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 18:08:43.125 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 18:08:43.412 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 287.0629ms
2026-01-30 18:08:43.442 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 18:08:43.433 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 18:08:43.459 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 17.285ms
2026-01-30 18:08:43.526 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 93.2607ms
2026-01-30 18:08:43.570 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 18:08:43.853 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 282.8828ms
2026-01-30 18:12:30.471 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 18:12:30.614 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 18:12:30.744 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 18:12:30.748 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 18:12:30.751 +02:00 [INF] Hosting environment: Development
2026-01-30 18:12:30.753 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 18:12:31.303 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 18:12:31.664 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 369.9113ms
2026-01-30 18:12:31.678 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 18:12:31.686 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 18:12:31.704 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 17.6937ms
2026-01-30 18:12:31.741 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.8766ms
2026-01-30 18:12:31.800 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 18:12:32.054 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 254.1568ms
2026-01-30 18:13:50.719 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/Create - multipart/form-data; boundary=----WebKitFormBoundaryupCmiGxe6RFxcWc6 56118
2026-01-30 18:13:50.753 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 18:13:51.996 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem)'
2026-01-30 18:13:52.039 +02:00 [INF] Route matched with {action = "AddUser", controller = "ApplicationUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddUserAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.AddUserCommand) on controller BankSystem.Controllers.ApplicationUserController (BankSystem).
2026-01-30 18:13:59.115 +02:00 [INF] Executed DbCommand (134ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2026-01-30 18:14:00.832 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 18:14:06.938 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 18:14:07.205 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [Address], [ConcurrencyStamp], [Country], [Email], [EmailConfirmed], [FullName], [Image], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2026-01-30 18:14:11.382 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 18:14:14.685 +02:00 [INF] Executed action BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem) in 22629.3429ms
2026-01-30 18:14:14.690 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem)'
2026-01-30 18:14:15.909 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/Create - 200 null application/json; charset=utf-8 25190.1058ms
2026-01-30 18:15:12.250 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundary12khrCjmcedSko6b 262
2026-01-30 18:15:12.283 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 18:15:12.295 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 18:15:14.183 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 18:15:19.676 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-30 18:15:19.741 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2026-01-30 18:15:22.498 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshToken] ([AddedTime], [ExpiryDate], [IsRevoked], [IsUsed], [JwtId], [RefreshTokenHash], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2026-01-30 18:15:29.607 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 18:15:34.899 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 22594.83ms
2026-01-30 18:15:34.904 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 18:15:36.532 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 200 null application/json; charset=utf-8 24282.6151ms
2026-01-30 18:17:53.332 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/AddRoleToUser - application/json 37
2026-01-30 18:17:53.360 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem)'
2026-01-30 18:17:53.371 +02:00 [INF] Route matched with {action = "AddRoleToUser", controller = "Authorization"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoleToUser(BusinessCore.BankSystem.Features.Authorization.Commands.Requests.AddRoleToUserCommand) on controller BankSystem.Controllers.AuthorizationController (BankSystem).
2026-01-30 18:17:53.538 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2026-01-30 18:17:53.563 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-30 18:17:53.596 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2026-01-30 18:17:53.619 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2026-01-30 18:17:53.637 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2026-01-30 18:17:53.662 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 18:17:53.738 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p20='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p21='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [Address] = @p3, [ConcurrencyStamp] = @p4, [Country] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Image] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2026-01-30 18:17:53.764 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 18:17:53.771 +02:00 [INF] Executed action BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem) in 391.2457ms
2026-01-30 18:17:53.775 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem)'
2026-01-30 18:17:53.779 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/AddRoleToUser - 200 null application/json; charset=utf-8 448.2364ms
2026-01-30 18:19:55.280 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 18:19:55.418 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 18:19:55.518 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 18:19:55.524 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 18:19:55.527 +02:00 [INF] Hosting environment: Development
2026-01-30 18:19:55.529 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 18:19:56.277 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 18:19:56.561 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 293.8787ms
2026-01-30 18:19:56.578 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 18:19:56.585 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 18:19:56.605 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 20.3565ms
2026-01-30 18:19:56.642 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 64.5931ms
2026-01-30 18:19:56.705 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 18:19:56.936 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 231.3483ms
2026-01-30 18:20:38.245 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/Create - multipart/form-data; boundary=----WebKitFormBoundaryKGgjZJ98vXBHxHGi 56117
2026-01-30 18:20:38.287 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 18:20:38.350 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem)'
2026-01-30 18:20:38.385 +02:00 [INF] Route matched with {action = "AddUser", controller = "ApplicationUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddUserAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.AddUserCommand) on controller BankSystem.Controllers.ApplicationUserController (BankSystem).
2026-01-30 18:20:44.626 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2026-01-30 18:20:45.802 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 18:20:49.239 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Response`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 18:20:51.785 +02:00 [INF] Executed action BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem) in 13389.1636ms
2026-01-30 18:20:51.793 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem)'
2026-01-30 18:20:53.354 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/Create - 400 null application/json; charset=utf-8 15108.6113ms
2026-01-30 18:21:34.906 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundaryqc11TPz2oovnRtU7 256
2026-01-30 18:21:34.933 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 18:21:34.948 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 18:21:37.303 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 18:21:43.592 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 18:21:45.997 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 11039.2868ms
2026-01-30 18:21:46.005 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 18:21:47.631 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 400 null application/json; charset=utf-8 12725.4557ms
2026-01-30 18:23:32.520 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/Create - multipart/form-data; boundary=----WebKitFormBoundaryrrGeXKuXWdOKapgX 51301
2026-01-30 18:23:32.549 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem)'
2026-01-30 18:23:32.557 +02:00 [INF] Route matched with {action = "AddUser", controller = "ApplicationUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddUserAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.AddUserCommand) on controller BankSystem.Controllers.ApplicationUserController (BankSystem).
2026-01-30 18:23:34.354 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2026-01-30 18:23:34.882 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 18:23:38.331 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 18:23:38.528 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [Address], [ConcurrencyStamp], [Country], [Email], [EmailConfirmed], [FullName], [Image], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2026-01-30 18:23:40.706 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 18:23:42.988 +02:00 [INF] Executed action BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem) in 10422.7356ms
2026-01-30 18:23:42.994 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.ApplicationUserController.AddUserAsync (BankSystem)'
2026-01-30 18:23:44.163 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/Create - 200 null application/json; charset=utf-8 11642.3023ms
2026-01-30 18:24:23.376 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/AddRoleToUser - application/json 36
2026-01-30 18:24:23.390 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem)'
2026-01-30 18:24:23.401 +02:00 [INF] Route matched with {action = "AddRoleToUser", controller = "Authorization"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoleToUser(BusinessCore.BankSystem.Features.Authorization.Commands.Requests.AddRoleToUserCommand) on controller BankSystem.Controllers.AuthorizationController (BankSystem).
2026-01-30 18:24:23.471 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2026-01-30 18:24:23.490 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-30 18:24:23.521 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2026-01-30 18:24:23.543 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2026-01-30 18:24:23.559 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2026-01-30 18:24:23.586 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 18:24:23.637 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p20='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p21='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [Address] = @p3, [ConcurrencyStamp] = @p4, [Country] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Image] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2026-01-30 18:24:23.662 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-30 18:24:23.670 +02:00 [INF] Executed action BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem) in 259.7789ms
2026-01-30 18:24:23.674 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthorizationController.AddRoleToUser (BankSystem)'
2026-01-30 18:24:23.678 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/AuthorizationService/AddRoleToUser - 200 null application/json; charset=utf-8 302.4551ms
2026-01-30 18:25:21.780 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundaryq5uS7qqyqw9lB2MO 252
2026-01-30 18:25:21.807 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 18:25:21.812 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 18:25:23.452 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 18:25:25.951 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-30 18:25:26.011 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2026-01-30 18:25:27.682 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshToken] ([AddedTime], [ExpiryDate], [IsRevoked], [IsUsed], [JwtId], [RefreshTokenHash], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2026-01-30 18:25:31.243 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 18:25:35.482 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 13661.1707ms
2026-01-30 18:25:35.487 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 18:25:36.886 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 200 null application/json; charset=utf-8 15105.885ms
2026-01-30 18:27:07.161 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 18:27:07.295 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 18:27:07.418 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 18:27:07.424 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 18:27:07.427 +02:00 [INF] Hosting environment: Development
2026-01-30 18:27:07.430 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 18:27:08.209 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 18:27:08.513 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 308.3688ms
2026-01-30 18:27:08.533 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 18:27:08.538 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 18:27:08.559 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 20.8055ms
2026-01-30 18:27:08.612 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.6629ms
2026-01-30 18:27:08.677 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 18:27:09.002 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 325.0906ms
2026-01-30 18:27:38.697 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetAll - null null
2026-01-30 18:27:38.741 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 18:27:38.955 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2026-01-30 18:27:38.963 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2026-01-30 18:27:38.968 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/Api/V1/BankAccount/GetAll - 403 0 null 270.6964ms
2026-01-30 18:28:04.729 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 18:28:04.747 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 18:28:04.778 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 18:28:17.690 +02:00 [INF] Creating account for user 20
2026-01-30 18:28:58.917 +02:00 [INF] CreateAccountAsync called by user 20, Target: 20, Type: "Saving", Currency: "EGP"
2026-01-30 18:29:58.206 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId], [u].[Id], [u].[CreatedAt], [u].[ISDeleted], [u].[Nationality], [u].[NationallId]
FROM [BankAccounts] AS [b]
INNER JOIN [users] AS [u] ON [b].[UserId] = [u].[Id]
WHERE [b].[UserId] = @__userId_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 18:30:07.419 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__accountNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId]
FROM [BankAccounts] AS [b]
WHERE [b].[AccountNumber] = @__accountNumber_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 18:30:07.466 +02:00 [DBG] Generated unique account number: ACCT-21260223F6D9
2026-01-30 18:30:26.760 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Single), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BankAccounts] ([AccountNumber], [AccountType], [Balance], [CreatedData], [Currency], [ISDeleted], [IsActive], [UpdatedData], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-30 18:30:26.844 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'InfrastructureLayer.BankSystem.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:71b7eb2a-c086-42b5-a5d0-849f2345fe09
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:71b7eb2a-c086-42b5-a5d0-849f2345fe09
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-30 18:30:27.155 +02:00 [ERR] Critical error during account creation
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:71b7eb2a-c086-42b5-a5d0-849f2345fe09
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at InfrastructureLayer.BankSystem.InfrastructureBases.Repository`1.AddAsync(T entity) in D:\BankSystem\BankSystem\BankSystem\InfrastructureLayer.BankSystem\InfrastructureBases\Repository.cs:line 46
   at ApplicationLayer.BankSystem.ImplementServices.BankAccountService.CreateAccountAsync(CreateAccountRequest model) in D:\BankSystem\BankSystem\BankSystem\ApplicationLayer.BankSystem\ImplementServices\BankAccountService.cs:line 258
   at BusinessCore.BankSystem.Features.BankAccount.Commands.Handler.BankAccountCommandHandler.Handle(CreateAccountCommand request, CancellationToken cancellationToken) in D:\BankSystem\BankSystem\BankSystem\BusinessCore.BankSystem\Features\BankAccount\Commands\Handler\BankAccountCommandHandler.cs:line 37
2026-01-30 18:30:27.256 +02:00 [INF] Executing ObjectResult, writing value of type 'Response`1[[BusinessCore.BankSystem.Features.BankAccount.Queries.Responses.BankAccountResponse, BusinessCore.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 18:30:27.282 +02:00 [INF] Executed action BankSystem.Controllers.BankAccountController.Create (BankSystem) in 142491.8415ms
2026-01-30 18:30:27.288 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 18:30:27.300 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - 500 null application/json; charset=utf-8 142571.1963ms
2026-01-30 18:42:44.849 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 18:42:44.983 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 18:42:45.115 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 18:42:45.120 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 18:42:45.123 +02:00 [INF] Hosting environment: Development
2026-01-30 18:42:45.127 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 18:42:45.572 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 18:42:45.923 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 360.0572ms
2026-01-30 18:42:45.932 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 18:42:45.944 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 18:42:45.958 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 27.1792ms
2026-01-30 18:42:46.015 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.6477ms
2026-01-30 18:42:46.066 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 18:42:46.319 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 252.3528ms
2026-01-30 18:42:59.703 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 18:42:59.739 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 18:42:59.802 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 18:42:59.827 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 18:43:08.423 +02:00 [INF] Creating account for user 20
2026-01-30 18:43:12.030 +02:00 [WRN] Attempted to access CurrentUserId but user is not authenticated
2026-01-30 18:43:47.330 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 18:43:47.458 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 18:43:47.570 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 18:43:47.578 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 18:43:47.581 +02:00 [INF] Hosting environment: Development
2026-01-30 18:43:47.584 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 18:43:48.140 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 18:43:48.469 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 330.4817ms
2026-01-30 18:43:48.484 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 18:43:48.486 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 18:43:48.505 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 17.8537ms
2026-01-30 18:43:48.539 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 56.6616ms
2026-01-30 18:43:48.622 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 18:43:48.855 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 232.2935ms
2026-01-30 18:44:08.947 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 18:44:08.991 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 18:44:09.116 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 18:44:09.146 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 18:44:14.691 +02:00 [INF] Creating account for user 20
2026-01-30 18:44:16.919 +02:00 [INF] CreateAccountAsync called by user 20, Target: 20, Type: "Saving", Currency: "EGP"
2026-01-30 18:44:43.513 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId], [u].[Id], [u].[CreatedAt], [u].[ISDeleted], [u].[Nationality], [u].[NationallId]
FROM [BankAccounts] AS [b]
INNER JOIN [users] AS [u] ON [b].[UserId] = [u].[Id]
WHERE [b].[UserId] = @__userId_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 18:44:49.691 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId]
FROM [BankAccounts] AS [b]
WHERE [b].[AccountNumber] = @__accountNumber_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 18:44:49.724 +02:00 [DBG] Generated unique account number: ACCT-A0085A738934
2026-01-30 18:45:51.398 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Single), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BankAccounts] ([AccountNumber], [AccountType], [Balance], [CreatedData], [Currency], [ISDeleted], [IsActive], [UpdatedData], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-30 18:45:51.463 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'InfrastructureLayer.BankSystem.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8512e1df-e170-4bab-961c-7869cc9f9236
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8512e1df-e170-4bab-961c-7869cc9f9236
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-30 18:45:51.786 +02:00 [ERR] Critical error during account creation
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8512e1df-e170-4bab-961c-7869cc9f9236
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at InfrastructureLayer.BankSystem.InfrastructureBases.Repository`1.AddAsync(T entity) in D:\BankSystem\BankSystem\BankSystem\InfrastructureLayer.BankSystem\InfrastructureBases\Repository.cs:line 46
   at ApplicationLayer.BankSystem.ImplementServices.BankAccountService.CreateAccountAsync(CreateAccountRequest model) in D:\BankSystem\BankSystem\BankSystem\ApplicationLayer.BankSystem\ImplementServices\BankAccountService.cs:line 258
   at BusinessCore.BankSystem.Features.BankAccount.Commands.Handler.BankAccountCommandHandler.Handle(CreateAccountCommand request, CancellationToken cancellationToken) in D:\BankSystem\BankSystem\BankSystem\BusinessCore.BankSystem\Features\BankAccount\Commands\Handler\BankAccountCommandHandler.cs:line 37
2026-01-30 18:45:51.853 +02:00 [INF] Executing ObjectResult, writing value of type 'Response`1[[BusinessCore.BankSystem.Features.BankAccount.Queries.Responses.BankAccountResponse, BusinessCore.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 18:45:51.875 +02:00 [INF] Executed action BankSystem.Controllers.BankAccountController.Create (BankSystem) in 102712.8397ms
2026-01-30 18:45:51.883 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 18:45:51.894 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - 500 null application/json; charset=utf-8 102947.3794ms
2026-01-30 19:01:47.593 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 19:01:47.725 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 19:01:47.853 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 19:01:47.862 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 19:01:47.864 +02:00 [INF] Hosting environment: Development
2026-01-30 19:01:47.867 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 19:01:48.376 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 19:01:48.730 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 362.8412ms
2026-01-30 19:01:48.738 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 19:01:48.745 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 19:01:48.767 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 21.764ms
2026-01-30 19:01:48.803 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.243ms
2026-01-30 19:01:48.853 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 19:01:49.066 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 213.5117ms
2026-01-30 19:02:15.966 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 19:02:16.013 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 19:02:16.138 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 4:45:26 PM', Current time (UTC): '1/30/2026 5:02:16 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2026-01-30 19:02:16.160 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/30/2026 4:45:26 PM', Current time (UTC): '1/30/2026 5:02:16 PM'.
2026-01-30 19:02:16.168 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 19:02:16.194 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 19:02:21.057 +02:00 [INF] Creating account for user 20
2026-01-30 19:02:23.078 +02:00 [WRN] Attempted to access CurrentUserId but user is not authenticated
2026-01-30 19:41:27.804 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 19:41:28.046 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 19:41:28.161 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 19:41:28.168 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 19:41:28.170 +02:00 [INF] Hosting environment: Development
2026-01-30 19:41:28.173 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 19:41:28.525 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 19:41:28.835 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 315.3536ms
2026-01-30 19:41:28.853 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 19:41:28.857 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 19:41:28.879 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 20.6457ms
2026-01-30 19:41:28.927 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 75.1914ms
2026-01-30 19:41:28.977 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 19:41:29.225 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 247.742ms
2026-01-30 19:42:02.251 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundaryii0ngjTskG9qWCMb 252
2026-01-30 19:42:02.289 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 19:42:03.376 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 19:42:03.414 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 19:42:09.225 +02:00 [INF] Executed DbCommand (106ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 19:42:17.496 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-30 19:42:17.556 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2026-01-30 19:42:19.838 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshToken] ([AddedTime], [ExpiryDate], [IsRevoked], [IsUsed], [JwtId], [RefreshTokenHash], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2026-01-30 19:42:25.916 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 19:42:29.771 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 26340.0988ms
2026-01-30 19:42:29.779 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 19:42:31.889 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 200 null application/json; charset=utf-8 29638.4303ms
2026-01-30 19:43:30.058 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 19:43:30.132 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 19:43:30.141 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 19:43:34.979 +02:00 [INF] Creating account for user 20
2026-01-30 19:43:39.041 +02:00 [INF] CreateAccountAsync called by user 20, Target: 20, Type: "Saving", Currency: "EGP"
2026-01-30 19:43:52.905 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId], [u].[Id], [u].[CreatedAt], [u].[ISDeleted], [u].[Nationality], [u].[NationallId]
FROM [BankAccounts] AS [b]
INNER JOIN [users] AS [u] ON [b].[UserId] = [u].[Id]
WHERE [b].[UserId] = @__userId_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 19:43:59.059 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__accountNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId]
FROM [BankAccounts] AS [b]
WHERE [b].[AccountNumber] = @__accountNumber_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 19:43:59.070 +02:00 [DBG] Generated unique account number: ACCT-D865D42FDC30
2026-01-30 19:44:05.129 +02:00 [INF] DEBUG DATABASE: Attempting to save account. Current UserId: 20
2026-01-30 19:44:28.257 +02:00 [INF] DEBUG DATA: Entity State before save - UserId: 20, Account: ACCT-D865D42FDC30
2026-01-30 19:44:44.389 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Single), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BankAccounts] ([AccountNumber], [AccountType], [Balance], [CreatedData], [Currency], [ISDeleted], [IsActive], [UpdatedData], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-30 19:44:44.447 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'InfrastructureLayer.BankSystem.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:164e984a-198e-4381-ab7c-7af1a15e55ce
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:164e984a-198e-4381-ab7c-7af1a15e55ce
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-30 19:48:02.456 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-30 19:48:02.513 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-01-30 19:48:02.515 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-30 19:48:02.516 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-01-30 19:48:02.534 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-01-30 19:48:02.563 +02:00 [INF] No migrations were applied. The database is already up to date.
2026-01-30 19:48:14.301 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 19:48:14.441 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 19:48:14.562 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 19:48:14.570 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 19:48:14.573 +02:00 [INF] Hosting environment: Development
2026-01-30 19:48:14.575 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 19:48:15.714 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 19:48:16.124 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 422.021ms
2026-01-30 19:48:16.140 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 19:48:16.148 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 19:48:16.163 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 23.1331ms
2026-01-30 19:48:16.258 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 109.2393ms
2026-01-30 19:48:16.309 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 19:48:16.532 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 223.1227ms
2026-01-30 19:48:46.201 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 19:48:46.247 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 19:48:46.376 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 19:48:46.428 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 19:48:52.785 +02:00 [INF] Creating account for user 20
2026-01-30 19:49:00.186 +02:00 [INF] CreateAccountAsync called by user 20, Target: 20, Type: "Saving", Currency: "EGP"
2026-01-30 19:49:08.068 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId], [u].[Id], [u].[CreatedAt], [u].[ISDeleted], [u].[Nationality], [u].[NationallId]
FROM [BankAccounts] AS [b]
INNER JOIN [users] AS [u] ON [b].[UserId] = [u].[Id]
WHERE [b].[UserId] = @__userId_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 19:49:10.718 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accountNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId]
FROM [BankAccounts] AS [b]
WHERE [b].[AccountNumber] = @__accountNumber_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 19:49:10.756 +02:00 [DBG] Generated unique account number: ACCT-63FE47DA3F3C
2026-01-30 19:49:13.251 +02:00 [INF] DEBUG DATABASE: Attempting to save account. Current UserId: 20
2026-01-30 19:49:25.326 +02:00 [INF] DEBUG DATA: Entity State before save - UserId: 20, Account: ACCT-63FE47DA3F3C
2026-01-30 19:49:31.210 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Single), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BankAccounts] ([AccountNumber], [AccountType], [Balance], [CreatedData], [Currency], [ISDeleted], [IsActive], [UpdatedData], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-30 19:49:31.276 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'InfrastructureLayer.BankSystem.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a8c074d9-9250-4255-947a-84bf998a7424
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a8c074d9-9250-4255-947a-84bf998a7424
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-30 20:16:21.049 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-30 20:16:21.104 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-01-30 20:16:21.106 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-30 20:16:21.107 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-01-30 20:16:21.121 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-01-30 20:16:21.134 +02:00 [INF] Applying migration '20260130181547_Changedatatypeofbankaccounttable'.
2026-01-30 20:16:21.265 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[BankAccounts]') AND [c].[name] = N'Currency');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [BankAccounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [BankAccounts] ALTER COLUMN [Currency] nvarchar(max) NOT NULL;
2026-01-30 20:16:21.282 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[BankAccounts]') AND [c].[name] = N'Balance');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [BankAccounts] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [BankAccounts] ALTER COLUMN [Balance] decimal(18,2) NOT NULL;
2026-01-30 20:16:21.307 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[BankAccounts]') AND [c].[name] = N'AccountType');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [BankAccounts] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [BankAccounts] ALTER COLUMN [AccountType] nvarchar(max) NOT NULL;
2026-01-30 20:16:21.310 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260130181547_Changedatatypeofbankaccounttable', N'8.0.19');
2026-01-30 20:16:33.938 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 20:16:34.079 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 20:16:34.198 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 20:16:34.203 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 20:16:34.206 +02:00 [INF] Hosting environment: Development
2026-01-30 20:16:34.209 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 20:16:34.744 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 20:16:35.039 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 297.3419ms
2026-01-30 20:16:35.049 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 20:16:35.061 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 20:16:35.084 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 21.0127ms
2026-01-30 20:16:35.132 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 82.7149ms
2026-01-30 20:16:35.192 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 20:16:35.413 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 220.9387ms
2026-01-30 20:17:11.140 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 20:17:11.177 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 20:17:11.230 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 20:17:11.257 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 20:17:16.078 +02:00 [INF] Creating account for user 20
2026-01-30 20:17:20.254 +02:00 [WRN] Attempted to access CurrentUserId but user is not authenticated
2026-01-30 20:20:00.324 +02:00 [INF] User profile is available. Using 'C:\Users\skytop\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-30 20:20:00.467 +02:00 [WRN] The WebRootPath was not found: D:\BankSystem\BankSystem\BankSystem\BankSystem\wwwroot. Static files may be unavailable.
2026-01-30 20:20:00.603 +02:00 [INF] Now listening on: http://localhost:5068
2026-01-30 20:20:00.609 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-30 20:20:00.612 +02:00 [INF] Hosting environment: Development
2026-01-30 20:20:00.616 +02:00 [INF] Content root path: D:\BankSystem\BankSystem\BankSystem\BankSystem
2026-01-30 20:20:01.191 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/index.html - null null
2026-01-30 20:20:01.537 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/index.html - 200 null text/html;charset=utf-8 353.3892ms
2026-01-30 20:20:01.544 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_vs/browserLink - null null
2026-01-30 20:20:01.561 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - null null
2026-01-30 20:20:01.576 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 15.1663ms
2026-01-30 20:20:01.603 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.2291ms
2026-01-30 20:20:01.672 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - null null
2026-01-30 20:20:01.960 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5068/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 288.3333ms
2026-01-30 20:20:24.094 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - multipart/form-data; boundary=----WebKitFormBoundaryF7jSp7DfLblBQG1u 252
2026-01-30 20:20:24.138 +02:00 [WRN] Failed to determine the https port for redirect.
2026-01-30 20:20:24.195 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 20:20:24.231 +02:00 [INF] Route matched with {action = "SignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignInAsync(BusinessCore.BankSystem.Features.User.Commands.Requests.SignInCommand) on controller BankSystem.Controllers.AuthenticationController (BankSystem).
2026-01-30 20:20:25.712 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[ConcurrencyStamp], [a].[Country], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[Image], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-30 20:20:27.370 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-30 20:20:27.423 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2026-01-30 20:20:29.341 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshToken] ([AddedTime], [ExpiryDate], [IsRevoked], [IsUsed], [JwtId], [RefreshTokenHash], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2026-01-30 20:20:34.034 +02:00 [INF] Executing OkObjectResult, writing value of type 'Response`1[[Domainlayer.BankSystem.Results.JwtAuthResult, Domainlayer.BankSystem, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-30 20:20:38.142 +02:00 [INF] Executed action BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem) in 13896.3962ms
2026-01-30 20:20:38.150 +02:00 [INF] Executed endpoint 'BankSystem.Controllers.AuthenticationController.SignInAsync (BankSystem)'
2026-01-30 20:20:39.859 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5068/Api/V1/User/SignIn - 200 null application/json; charset=utf-8 15764.9291ms
2026-01-30 20:21:30.907 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5068/Api/V1/BankAccount/Create - application/json 55
2026-01-30 20:21:30.982 +02:00 [INF] Executing endpoint 'BankSystem.Controllers.BankAccountController.Create (BankSystem)'
2026-01-30 20:21:30.997 +02:00 [INF] Route matched with {action = "Create", controller = "BankAccount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BusinessCore.BankSystem.Features.BankAccount.Commands.Models.CreateAccountCommand) on controller BankSystem.Controllers.BankAccountController (BankSystem).
2026-01-30 20:21:36.881 +02:00 [INF] Creating account for user 20
2026-01-30 20:21:41.064 +02:00 [INF] CreateAccountAsync called by user 20, Target: 20, Type: "Current", Currency: "EGP"
2026-01-30 20:22:01.560 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId], [u].[Id], [u].[CreatedAt], [u].[ISDeleted], [u].[Nationality], [u].[NationallId]
FROM [BankAccounts] AS [b]
INNER JOIN [users] AS [u] ON [b].[UserId] = [u].[Id]
WHERE [b].[UserId] = @__userId_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 20:22:03.988 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[AccountType], [b].[Balance], [b].[CreatedData], [b].[Currency], [b].[ISDeleted], [b].[IsActive], [b].[UpdatedData], [b].[UserId]
FROM [BankAccounts] AS [b]
WHERE [b].[AccountNumber] = @__accountNumber_0 AND [b].[ISDeleted] = CAST(0 AS bit)
2026-01-30 20:22:04.022 +02:00 [DBG] Generated unique account number: ACCT-4135AD21C0FB
2026-01-30 20:22:07.214 +02:00 [INF] DEBUG DATABASE: Attempting to save account. Current UserId: 20
2026-01-30 20:22:13.631 +02:00 [INF] DEBUG DATA: Entity State before save - UserId: 20, Account: ACCT-4135AD21C0FB
2026-01-30 20:22:14.508 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BankAccounts] ([AccountNumber], [AccountType], [Balance], [CreatedData], [Currency], [ISDeleted], [IsActive], [UpdatedData], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-30 20:22:14.568 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'InfrastructureLayer.BankSystem.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:215171d6-cf28-4d9a-9d3d-9934a8ddc4f2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BankAccounts_users_UserId". The conflict occurred in database "BankDB", table "dbo.users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:215171d6-cf28-4d9a-9d3d-9934a8ddc4f2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
